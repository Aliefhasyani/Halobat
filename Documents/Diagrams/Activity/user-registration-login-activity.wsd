@startuml user-registration-login-activity
skinparam linetype spline
title User Registration and Login Activity Diagram

|Guest|
start
:Visit Website;

if (Want to Register?) then (yes)
  :Fill Registration Form;
  :Enter Username, Email, Password;
  :Submit Registration;
  
  |System|
  if (Valid Data?) then (yes)
    :Create User Account;
    :Assign Default Role;
    
    |Guest|
    :Account Created Successfully;
    :Redirect to Login;
    stop
  else (no)
    |Guest|
    :Show Validation Errors;
    :Fix Form Errors;
    stop
  endif

else (no)
  |Guest|
  if (Want to Login?) then (yes)
    :Enter Login Credentials;
    :Submit Login Form;
    
    |System|
    if (Valid Credentials?) then (yes)
      :Authenticate User;
      :Create Session;
      :Set User Role;
      
      |User|
      :Login Successful;
      :Access Dashboard;
    else (no)
      |Guest|
      :Show Login Error;
      :Try Again or Reset Password;
      stop
    endif
  else (no)
    :Browse as Guest;
    :Limited Access to Catalog;
    stop
  endif
endif

|User|
:Access User Dashboard;
if (Want to Update Profile?) then (yes)
  :Edit User Information;
  :Update Full Name, Email;
  :Save Changes;
  
  |System|
  :Validate Changes;
  :Update User Record;
  :Show Success Message;
|User|
else (no)
    stop
endif

stop
@enduml
